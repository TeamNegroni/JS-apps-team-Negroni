<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Notebook application</title>
    <script src="//www.parsecdn.com/js/parse-1.5.0.min.js"></script>
    <!-- Bootstrap -->
    <link href="Content/bootstrap-theme.min.css" rel="stylesheet">
    <link href="Content/bootstrap.min.css" rel="stylesheet">
    <link href="Content/styles.css" rel="stylesheet">
    <link href="Content/jquery-ui.min.css" rel="stylesheet" />
    <link href="Content/jquery-ui.structure.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body cz-shortcut-listen ="true">
    <div class="container">
        <div id="login-wrapper">
            <form class="form-sign-in" id="id-form-sign-in">
                <h1 class="form-signin-heading">Please Login</h1>
                <input type="text" class="form-control  form-sign-in-username" name="username" placeholder="Account name" required="" autofocus="" />
                <input type="password" class="form-control form-sign-in-password" name="password" placeholder="Password" required="" />

                <button class="btn btn-lg btn-primary btn-block form-sign-in-button" type="submit">Log in</button>
            </form>
            <form class="form-sign-up" id="id-form-sign-up">
                <h1 class="form-sign-up-heading" >Please Sign Up</h1>
                <input type="text" class="form-control form-sign-up-username" name="username" placeholder="Account name" required="" autofocus="" />
                <input type="password" class="form-control password1" name="password" placeholder="Password" required="" />
                <input type="password" class="form-control password2" name="password" placeholder="Password" required="" />
                <button class="btn btn-lg btn-primary btn-block btn-sign-up" type="submit">Register</button>
                <button class="btn btn-lg btn-primary btn-block btn-go-back-to-sign-in" type="submit">I am registered. Go Back To Log-In</button>
            </form>
            <p class="text-center sign-up"><strong>Sign up</strong> for a new account</p>
            <button class="btn btn-lg btn-primary btn-block register" type="submit">Not registered</button>
        </div>
        <!--Change display option at the styles.css file-->
        <div id="ui-wrapper">
            <div class="row">
                <div class="btn-toolbar" role="toolbar" aria-label="Key buttons toolbar">
                    <div class="btn-group input-group" role="group" aria-label="Group one">
                        <span class="input-group-addon" id="basic-addon1">Completion level</span>
                        <button type="button" class="btn btn-success">Success</button>
                        <button type="button" class="btn btn-warning">Warning</button>
                        <button type="button" class="btn btn-danger">Danger</button>
                    </div>
                    <div class="btn-group" role="group" aria-label="Group two">
                        <button type="button" class="btn btn-default input-attribute" disabled="disabled">Image</button>
                        <button type="button" class="btn btn-default input-attribute" disabled="disabled">Textarea</button>
                        <button type="button" class="btn btn-default input-attribute" disabled="disabled"><em>Something</em></button>
                        <button type="button" class="btn btn-default input-attribute" disabled="disabled"><em>Something</em></button>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            <em>Select the type of your Note</em>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            <li><a href="#">Issue Note</a></li>
                            <li><a href="#">Meeting Note</a></li>
                            <li><a href="#">Bank Note</a></li>
                            <li><a href="#">Shopping list Note</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-8" id="input-wrapper">
                   <ul id="grid">
                           <li id="gridAdder" class="gridPiece">
                               <span class="glyphicon glyphicon-plus" aria-hidden="true" id="adder-sign"></span>
                               <br />
                               <div id="input-type-wrapper">
                                   <div class="btn-group-vertical" role="group" aria-label="Group two">
                                       <button type="button" class="btn btn-default input-type-image">Image</button>
                                       <button type="button" class="btn btn-default input-type-textarea">Textarea</button>
                                       <div class="dropdown">
                                           <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                               Note
                                           </button>
                                           <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                                               <li class="input-type-issue-note"><a>Issue Note</a></li>
                                               <li class="input-type-meeting-note"><a>Meeting Note</a></li>
                                               <li class="input-type-bank-note"><a>Bank Note</a></li>
                                               <li class="input-type-shopping-note"><a>Shopping list Note</a></li>
                                           </ul>
                                       </div>
                                       <button type="button" class="btn btn-default input-type"><em>Something</em></button>
                                   </div>
                               </div>                               
                           </li>
                   </ul>
                </div>
                <div class="col-md-8" id="calendar-wrapper">#CALENDAR</div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <input class="form-control" id="current-date" type="text" placeholder="Date" readonly />
                    <input type="text" id="date-picker" />
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="date-controller-checkbox"> TO DO Mode
                        </label>
                    </div>
                </div>
                <div class="col-md-4">
                        <label>
                            <input type="checkbox" id="edit-controller"> Edit
                        </label>
                </div>
            </div>
        </div>
    </div>
    <!--<script>Parse.initialize("ot544ZKOQzqFTvJlCH33vIR3pTLRch4wZZQEU70P", "mi3vvCD2EwmNmEAXPkXjcjvIpzKddrA4JT5td4mE");</script>-->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="Scripts/jquery-2.1.4.min.js"></script>
    <script src="Scripts/jquery-ui.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="Scripts/bootstrap.min.js"></script>
    <script src="Scripts/Notes.js"></script>
    <script src="Scripts/uiController.js"></script>
    <script src="Scripts/grid.js"></script>

    <script>
        Parse.initialize("ot544ZKOQzqFTvJlCH33vIR3pTLRch4wZZQEU70P", "mi3vvCD2EwmNmEAXPkXjcjvIpzKddrA4JT5td4mE");
        var $signUpFieldUsername = $('.form-sign-up .form-sign-up-username');
        var $signUpFieldEmail = $('.form-sign-up .email');
        var $signUpButton = $('.form-sign-up .btn-sign-up');
        var $signUpBackToSignInButton = $('.form-sign-up .btn-go-back-to-sign-in');
        var $signUpFieldPassword1 = $('.form-sign-up .password1');
        var $signUpFieldPassword2 = $('.form-sign-up .password2');
        var $register = $('.register');
        var $formSignUp = $('#id-form-sign-up');
        var $textSignUp = $('.text-center .sign-up');

        var $signInFieldUsername = $('.form-sign-in .form-sign-in-username');
        var $signInFieldPassword = $('.form-sign-in .form-sign-in-password');
        var $signInButton = $('.form-sign-in-button');

        var $container = $(".container");

        var $nameTitle = $('<div/>');
        var $logOut = $('<div/>').html('Log Out');

        $register.on('click', function(ev) {
            var $this = $(this);
            var $formSignin = $('.form-sign-in');
            var $formSignUp = $('.form-sign-up');
            $formSignin.css('display', 'none');
            $formSignUp.css('display', 'inline-block');
            $this.css('display', 'none');
        });

        $signUpButton.on('click', function(event) {
            event.preventDefault();
            var loggedInUser = Parse.User.current();
            Parse.User.logOut();
            console.log($signUpFieldUsername.val());
            console.log($signUpFieldPassword1.val());
            //User.signUp($signUpFieldUsername.val(),$signUpFieldPassword1.val()) ;
            //console.log('user registered');

            var user = new Parse.User();
            user.set("username", $signUpFieldUsername.val());
            user.set("password", $signUpFieldPassword1.val());
            //user.set("email", $signUpFieldEmail.val());
            user.signUp(null, {
                success: function(user) {
                    $nameTitle.html('Logged in as ' + $signUpFieldUsername.val());
                    $formSignUp.css('display', 'none');
                    $register.css('display','none');
                    $textSignUp.css('display', 'none');
                    console.log($nameTitle.html());
                    $container.prepend($logOut);
                    $container.prepend($nameTitle);
                },
                error: function(user, error) {
                    alert("Error: " + error.code + " " + error.message);
                }
            });
        });

        $signInButton.on('click', function(ev) {
            event.preventDefault();
            var $this = $(this);
            var $formSignin = $('.form-sign-in');
            var loggedInUser = Parse.User.current();
            Parse.User.logOut();
            console.log($logOut.html());
            loggedInUser =  Parse.User.current();
            if(!loggedInUser){
                Parse.User.logIn($signInFieldUsername.val(), $signInFieldPassword.val(), {
                    success: function(user) {
                        $formSignin.css('display', 'none');
                        $this.css('display', 'none');
                        $nameTitle.html('Logged in as ' + $signInFieldUsername.val());
                        $register.css('display','none');
                        $container.prepend($logOut);
                        $container.prepend($nameTitle);
                    },
                    error: function(user, error) {
                        alert("Error: " + error.code + " " + error.message);
                    }
                });
            } else {
                console.log(loggedInUser.get("username"));
            }
        });

        $logOut.on('click', function(ev) {
            $logOut.detach();
            $nameTitle.detach();
            var $formSignin = $('.form-sign-in');
            Parse.User.logOut();
            $formSignin.css('display', 'inline-block');
            $signInButton.css('display', 'inline-block');
            $register.css('display','inline-block');
        });

        $signUpBackToSignInButton.on('click', function(ev) {
            var $formSignin = $('.form-sign-in');
            $formSignUp.css('display', 'none');
            $register.css('display','none');
            $textSignUp.css('display', 'none');
            $formSignin.css('display', 'inline-block');
            $signInButton.css('display', 'inline-block');
            $register.css('display','inline-block');
        });

        //var User = Parse.User;
        //User.signUp('Don1', '1234')
        //        .then(function(){
        //            console.log('user registered');
        //        });
        //
        //var TestObject = Parse.Object.extend("TestObject");
        //var testObject = new TestObject();
        //testObject.save({foo: "bar"}).then(function(object) {alert("yay! it worked");
        //});
    </script>
</body>
</html>
